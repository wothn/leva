# 生词本浏览器扩展

这是一个Chrome扩展，可以帮助用户收集和管理在浏览网页时遇到的生词。

## 功能特点

1. **生词收集**：
   - 通过右键菜单选项添加生词
   - 支持快捷键（Ctrl+Shift+A）快速添加选中的单词
   - 支持浮动工具栏，在选中文本时出现添加按钮

2. **高亮显示**：
   - 自动高亮显示网页上的生词
   - 支持多种高亮样式（下划线、背景色、边框）
   - 支持自定义高亮颜色

3. **生词管理**：
   - 在弹出窗口中展示收集的所有生词
   - 提供搜索过滤功能
   - 支持删除单个生词
   - 支持一键清空所有生词
   - 支持清空单词释义缓存
   - 提供导出生词列表功能

4. **设置功能**：
   - 提供用户友好的设置界面
   - 支持开启/关闭划词工具栏
   - 支持自定义高亮样式和颜色
   - 支持开启/关闭悬浮释义功能
   - 支持开启/关闭深色模式
   - 支持开启/关闭自动发音功能

5. **悬浮释义**：
   - 当用户鼠标悬停在高亮单词上时显示释义
   - 通过Cambridge Dictionary获取单词的英汉/英英释义
   - 显示包含音标、多个释义和例句的悬浮提示框
   - 支持单词发音功能

## 词典解析系统

本扩展集成了三大权威词典的解析功能，提供全面的中英文双语支持。

### 支持的词典
1. **牛津词典** - 提供详细的英文定义和例句
2. **剑桥词典** - 提供中英文双语定义和例句
3. **柯林斯词典** - 提供详细的英文定义和丰富的例句

### 双语支持特性
- **英文定义**: 所有词典都提供完整的英文定义
- **中文翻译**: 剑桥词典提供中文定义和例句翻译
- **例句展示**: 支持中英文对照的例句展示
- **音标发音**: 提供英式/美式音标和发音功能

## 安装和使用

1. 在Chrome浏览器中打开 `chrome://extensions/`
2. 启用"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择本项目文件夹
5. 扩展安装完成后，可以在任何网页上使用

## 快捷键

- `Ctrl+Shift+V`：打开生词本弹窗
- `Ctrl+Shift+A`：添加选中的单词到生词本

## 技术实现

### 核心文件
- `js/offscreen.js` - 主解析文件，包含三大词典的解析逻辑
- `js/cambridge-parser.js` - 剑桥词典专用解析器，支持中英文双语
- `js/test-dictionaries.js` - 词典功能测试脚本

### 数据格式
所有词典解析结果统一为以下格式：
```javascript
{
  word: "apple",
  dictionary: "cambridge",
  pronunciations: [...],
  definitions: [{
    partOfSpeech: "noun",
    definition: "英文定义",
    chinese: "中文翻译",
    examples: [{
      eng: "英文例句",
      chi: "中文翻译"
    }]
  }]
}
```

## 技术实现

- 使用Chrome Extensions API
- 使用Chrome Storage API存储生词数据
- 使用Offscreen API解析词典网页
- 使用正则表达式匹配和高亮生词
- 使用MutationObserver监视DOM变化以处理动态内容